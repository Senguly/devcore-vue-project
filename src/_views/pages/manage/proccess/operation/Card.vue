var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.item)?_c('div',{ref:"operation",staticClass:"process-operation",class:{'enable-drag':!_vm.editing, 'active':_vm.editing, 'collapsed':_vm.collapsed}},[_c('b-card',{staticClass:"shadow-sm mb-3 bg-white border stage-card",attrs:{"no-body":""}},[(_vm.item)?_c('div',[_c('b-card-header',{staticClass:"header"},[_c('div',{staticClass:"title pl-0"},[_c('h2',{staticClass:"h5 m-0 text-capitalize text-left text-overflow text-bold"},[_vm._v(_vm._s(_vm.item.title))]),_c('div',{staticClass:"tools"},[(_vm.$can('process/operation/update', _vm.item))?_c('span',{staticClass:"btn-action",on:{"click":_vm.toggleEdit}},[_c('i',{staticClass:"mdi mdi-pencil"})]):_vm._e()])])]),_c('b-card-body',{staticClass:"pt-0"},[_c('p',{staticClass:"p-0 m-0 text-gray text-justify text-multiline"},[_vm._v(_vm._s(_vm.item.description))]),_c('div',[(_vm.item.companyRoles && _vm.item.companyRoles.length>0)?_c('div',{staticClass:"stacked-avatars px-0"},_vm._l((_vm.item.companyRoles),function(role){return _c('div',{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:({  placement: 'top', boundary:'viewport' }),expression:"{  placement: 'top', boundary:'viewport' }"}],key:role.id,staticClass:"avatar-item",attrs:{"title":role.name}},[_c('img',{attrs:{"src":role.getAvatarUrl('50x50'),"height":"21"}})])}),0):_vm._e()]),_c('div',{staticClass:"list-group border-0 border-top-1"},[_c('dragable',_vm._b({on:{"change":_vm.onPhaseDrag},model:{value:(_vm.phases),callback:function ($$v) {_vm.phases=$$v},expression:"phases"}},'dragable',{disabled:_vm.orderBusy||_vm.editingCard, group:'phases', draggable:'.enable-drag', animation:200, filter:'.busy'},false),_vm._l((_vm.phases),function(phase){return _c('phase-card',{key:phase.id,staticClass:"item",attrs:{"item":phase,"operation":_vm.item},on:{"editing":_vm.editingPhase}})}),1),_c('action-card',{ref:"newPhaseCard",staticClass:"primary list-group-item",on:{"beforeModeChange":_vm.preparePhase,"beforeToggle":_vm.preparePhase}},[_c('template',{slot:"placeholder"},[_c('b-button',{staticClass:"text-primary p-3",attrs:{"variant":"transparent","size":"md","block":""}},[_c('i',{staticClass:"mdi mdi-plus"}),_vm._v(" "+_vm._s(_vm.$t('Add phase'))+" ")])],1),_c('phase-form',{attrs:{"operation":_vm.item},on:{"close":_vm.closePhaseForm},model:{value:(_vm.newPhase),callback:function ($$v) {_vm.newPhase=$$v},expression:"newPhase"}})],2)],1)])],1):_c('div',[_vm._v("create new phase")])]),(_vm.editForm)?_c('div',{staticClass:"form"},[_c('layer',{key:_vm.intent,on:{"closed":_vm.cancelEdit}},[_c('div',{ref:"editRolesPlaceholder",staticStyle:{"height":"1px"}}),(_vm.showRolesPopover)?_c('div',{staticClass:"overlay transparent",on:{"click":_vm.closeRolesPopover}}):_vm._e(),_c('b-form',{on:{"submit":function($event){$event.preventDefault();return _vm.saveItem($event)}}},[_c('div',[_c('b-row',[_c('b-col',[_c('b-card',{staticClass:"bg-white shadow-sm",attrs:{"no-body":""}},[_c('div',{staticClass:"form-group my-0"},[_c('b-input',{directives:[{name:"autofocus",rawName:"v-autofocus",value:(true),expression:"true"},{name:"autoresize",rawName:"v-autoresize"},{name:"validate",rawName:"v-validate",value:('required|min:4'),expression:"'required|min:4'"}],key:_vm.intent,staticClass:"no-style my-0",staticStyle:{"min-height":"20px","height":"30px","overflow":"hidden"},attrs:{"state":_vm.$validateState('title', _vm.editForm),"placeholder":_vm.$t('Operation name'),"name":"title"},model:{value:(_vm.editForm.title),callback:function ($$v) {_vm.$set(_vm.editForm, "title", $$v)},expression:"editForm.title"}}),_c('b-form-invalid-feedback',[_vm._v(_vm._s(_vm.$displayError('title', _vm.editForm)))])],1),_c('div',{staticClass:"form-group my-0"},[_c('b-textarea',{directives:[{name:"autoresize",rawName:"v-autoresize"}],key:_vm.intent,staticClass:"no-style my-0",staticStyle:{"min-height":"20px","overflow":"hidden"},attrs:{"placeholder":_vm.$t('Operation description'),"state":_vm.$validateState('description', _vm.editForm),"name":"description"},model:{value:(_vm.editForm.description),callback:function ($$v) {_vm.$set(_vm.editForm, "description", $$v)},expression:"editForm.description"}}),_c('b-form-invalid-feedback',[_vm._v(_vm._s(_vm.$displayError('description', _vm.editForm)))])],1)]),_c('div',{staticClass:"mt-3"},[_c('loading-button',{staticClass:"padding shadow-sm",attrs:{"size":"md","loading":_vm.editForm.busy,"disabled":_vm.vErrors.any() || _vm.editForm.busy,"type":"submit"}},[_vm._v(_vm._s(_vm.$t('Save')))])],1)],1)],1)],1),_c('b-popover',{key:_vm.intent,attrs:{"placement":"rightbottom","show":true,"target":function (){ return _vm.$refs.editRolesPlaceholder; },"custom-class":"no-arrow transparent offset-t-5"}},[_c('b-card',{staticClass:"bg-light shadow-sm",staticStyle:{"width":"210px"},attrs:{"no-body":""}},[_c('b-card-body',[(_vm.editForm.companyRoles && _vm.editForm.companyRoles.length>0)?_c('ul',{staticClass:"list-inline break mb-0"},_vm._l((_vm.selectedRoles),function(role){return _c('li',{key:role.id,staticClass:"list-inline-item my-1 mx-1"},[_c('img',{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{"hover":true}}],staticClass:"rounded rounded-circle border",attrs:{"src":role.getAvatarUrl('50x50'),"height":"30","title":role.name}})])}),0):_c('span',{staticClass:"text-dark"},[_vm._v(_vm._s(_vm.$t('No'))+" "+_vm._s(_vm.$t('roles'))+" "+_vm._s(_vm.$t('selected')))])]),_c('b-card-footer',{staticClass:"mx-2"},[_c('b-button',{ref:"btnAssignRoles",staticClass:"text-primary",attrs:{"block":"","variant":"white","size":"md"},on:{"click":_vm.toggleRolesPopover}},[_vm._v("+ "+_vm._s(_vm.$t('Assign roles')))]),_c('b-popover',{attrs:{"target":function (){ return _vm.$refs.btnAssignRoles; },"placement":"bottom","custom-class":"offset-t-5","show":_vm.showRolesPopover},on:{"update:show":function($event){_vm.showRolesPopover=$event}}},[_c('div',{staticClass:"rounded",staticStyle:{"width":"210px","overflow":"hidden"}},[_c('company-role-selector',{key:_vm.intent,attrs:{"selector-class":"rounded","show-input":false,"show-footer-selection":false,"showFooterDisplay":false,"items":_vm.availableRoles,"show-add-btn":_vm.$can('core/companyRole/create')},on:{"close":_vm.toggleRolesPopover},model:{value:(_vm.editForm.companyRoles),callback:function ($$v) {_vm.$set(_vm.editForm, "companyRoles", $$v)},expression:"editForm.companyRoles"}})],1)])],1)],1),(_vm.$can('process/operation/delete', _vm.editItem))?_c('div',{staticClass:"mt-2"},[_c('confirm-button',{attrs:{"variant":"transparent","confirmMessage":_vm.$t('This action cannot be undone!'),"confirmTitle":_vm.$t('Delete operation')+'?',"confirmText":_vm.$t('Delete operation'),"btnClass":"text-white border outline-none","size":"xs","showOverlay":false,"block":""},on:{"confirm":_vm.deleteItem}},[_vm._v(_vm._s(_vm.$t('Delete operation')))])],1):_vm._e()],1)],1)],1)],1):_vm._e()],1):_vm._e()}
var staticRenderFns = []

export { render, staticRenderFns }