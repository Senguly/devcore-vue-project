var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"process-stage",class:{'enable-drag':!_vm.editing, 'active':_vm.editing, 'collapsed':_vm.collapsed}},[_c('b-card',{staticClass:"stage-card",attrs:{"no-body":""}},[(_vm.item)?_c('div',[_c('b-card-header',{staticClass:"header"},[_c('div',{staticClass:"tools"},[_c('span',{staticClass:"expander",on:{"click":_vm.toggleCollapse}})]),_c('div',{staticClass:"title"},[_c('h2',{staticClass:"h4 m-0 text-capitalize text-center text-overflow text-bold"},[_vm._v(_vm._s(_vm.item.title))]),_c('div',{staticClass:"tools"},[(_vm.$can('process/stage/update', _vm.item))?_c('span',{staticClass:"btn-action",on:{"click":_vm.toggleEdit}},[_c('i',{staticClass:"mdi mdi-pencil"})]):_vm._e()])]),_c('hr',{staticClass:"m-0 mt-2"}),_c('div',{staticClass:"companyRoles"},[(_vm.item.companyRoles && _vm.item.companyRoles.length>0)?_c('div',[_c('div',{staticClass:"stacked-avatars left"},_vm._l((_vm.item.companyRoles),function(role){return _c('div',{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:({  placement: 'top', boundary:'viewport' }),expression:"{  placement: 'top', boundary:'viewport' }"}],key:role.id,staticClass:"avatar-item",attrs:{"title":role.name}},[_c('img',{attrs:{"src":role.getAvatarUrl('50x50'),"height":"20"}})])}),0),_c('hr',{staticClass:"my-0"})]):_vm._e()])]),_c('b-card-body',[_c('draggable',_vm._b({staticClass:"sortable-wrapper",attrs:{"group":"operations"},on:{"change":_vm.onOperationDrag},model:{value:(_vm.operations),callback:function ($$v) {_vm.operations=$$v},expression:"operations"}},'draggable',{disabled:_vm.orderBusy||_vm.editingCard, draggable:'.enable-drag', animation:200, filter:'.busy'},false),_vm._l((_vm.operations),function(operation){return _c('operation-card',{key:operation.id,staticClass:"operation item",attrs:{"item":operation,"stage":_vm.item},on:{"editing":_vm.editingOperation}})}),1),_c('action-card',{ref:"newOperationCard",staticClass:"primary busy",on:{"beforeModeChange":_vm.prepareOperation,"beforeToggle":_vm.prepareOperation}},[_c('template',{slot:"placeholder"},[_c('b-button',{attrs:{"variant":"primary","size":"lg","block":""}},[_c('i',{staticClass:"mdi mdi-plus"}),_vm._v(" "+_vm._s(_vm.$t('Add operation'))+" ")])],1),_c('operation-form',{attrs:{"stage":_vm.item},on:{"close":_vm.closeOperationForm},model:{value:(_vm.newOperation),callback:function ($$v) {_vm.newOperation=$$v},expression:"newOperation"}})],2)],1)],1):_c('div',[_vm._v("create new stage")])]),(_vm.editForm)?_c('div',{staticClass:"form"},[_c('layer',{key:_vm.intent,staticStyle:{"width":"100%"},on:{"closed":_vm.cancelEdit}},[(_vm.showRolesPopover)?_c('div',{staticClass:"overlay transparent",on:{"click":_vm.closeRolesPopover}}):_vm._e(),_c('b-form',{on:{"submit":function($event){$event.preventDefault();return _vm.saveItem($event)}}},[_c('div',[_c('b-row',[_c('b-col',[_c('b-card',{staticClass:"bg-white shadow-sm",attrs:{"no-body":""}},[_c('div',{ref:"editRolesPlaceholder",staticStyle:{"height":"1px","position":"absolute","width":"100%"}}),_c('div',{staticClass:"form-group my-0"},[_c('b-textarea',{directives:[{name:"autofocus",rawName:"v-autofocus",value:(true),expression:"true"},{name:"autoresize",rawName:"v-autoresize"},{name:"validate",rawName:"v-validate",value:('required|min:4'),expression:"'required|min:4'"}],key:_vm.intent,staticClass:"no-style my-0",staticStyle:{"min-height":"70px","overflow":"hidden"},attrs:{"state":_vm.$validateState('title', _vm.editForm),"name":"title"},model:{value:(_vm.editForm.title),callback:function ($$v) {_vm.$set(_vm.editForm, "title", $$v)},expression:"editForm.title"}}),_c('b-form-invalid-feedback',[_vm._v(_vm._s(_vm.$displayError('title', _vm.editForm)))])],1)]),_c('div',{staticClass:"mt-3"},[_c('loading-button',{staticClass:"padding shadow-sm",attrs:{"loading":_vm.editForm.busy,"disabled":_vm.vErrors.any()||_vm.editForm.busy,"size":"md","type":"submit"}},[_vm._v(_vm._s(_vm.$t('Save')))])],1)],1)],1)],1),_c('b-popover',{key:_vm.intent,attrs:{"placement":"right","show":true,"target":function (){ return _vm.$refs.editRolesPlaceholder; },"custom-class":"no-arrow transparent"}},[_c('b-card',{staticClass:"bg-light shadow-sm",staticStyle:{"width":"210px","margin-top":"15px"},attrs:{"no-body":""}},[_c('b-card-body',[(_vm.editForm.companyRoles && _vm.editForm.companyRoles.length>0)?_c('ul',{staticClass:"list-inline break mb-0"},_vm._l((_vm.selectedRoles),function(role){return _c('li',{key:role.id,staticClass:"list-inline-item my-1 mx-1"},[_c('img',{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{"hover":true}}],staticClass:"rounded rounded-circle border",attrs:{"src":role.getAvatarUrl('50x50'),"height":"30","title":role.name}})])}),0):_c('span',{staticClass:"text-dark"},[_vm._v(_vm._s(_vm.$t('No'))+" "+_vm._s(_vm.$t('roles'))+" "+_vm._s(_vm.$t('selected')))])]),_c('b-card-footer',{staticClass:"mx-2"},[_c('b-button',{ref:"btnAssignRoles",staticClass:"text-primary",attrs:{"block":"","variant":"white","size":"md"},on:{"click":_vm.toggleRolesPopover}},[_vm._v("+ "+_vm._s(_vm.$t('Assign roles')))]),_c('b-popover',{attrs:{"target":function (){ return _vm.$refs.btnAssignRoles; },"placement":"bottom","custom-class":"offset-t-5","show":_vm.showRolesPopover},on:{"update:show":function($event){_vm.showRolesPopover=$event}}},[_c('div',{staticClass:"rounded",staticStyle:{"width":"210px","overflow":"hidden"}},[_c('company-role-selector',{key:_vm.intent,attrs:{"selector-class":"rounded","show-input":false,"show-footer-selection":false,"showFooterDisplay":false,"show-add-btn":_vm.$can('core/companyRole/create')},on:{"close":_vm.toggleRolesPopover},model:{value:(_vm.editForm.companyRoles),callback:function ($$v) {_vm.$set(_vm.editForm, "companyRoles", $$v)},expression:"editForm.companyRoles"}})],1)])],1)],1),(_vm.$can('process/stage/delete', _vm.editItem))?_c('div',{staticClass:"mt-2"},[_c('confirm-button',{attrs:{"variant":"transparent","confirmMessage":_vm.$t('This action cannot be undone!'),"confirmTitle":_vm.$t('Delete stage')+'?',"confirmText":_vm.$t('Delete stage'),"btnClass":"text-white border outline-none","size":"xs","showOverlay":false,"block":""},on:{"confirm":_vm.deleteItem}},[_vm._v(_vm._s(_vm.$t('Delete stage')))])],1):_vm._e()],1)],1)],1)],1):_vm._e()],1)}
var staticRenderFns = []

export { render, staticRenderFns }